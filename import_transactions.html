<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Import Transactions • Fastrans Accounting</title>
  <link rel="stylesheet" href="assets/css/styles.css?v=24"/>
  <script defer src="assets/js/app.js?v=24"></script>
</head>
<body>
  <div class="container">
    
<div class="sidebar">
  <div class="brand">
    <div class="logo"></div>
    <div>
      <h1>Fastrans Accounting</h1>
      <p>Singapore-compliant • Audit-ready</p>
    </div>
  </div>

  <div class="nav">
    <div class="section">Core</div>
    <a href="dashboard.html"><span>Dashboard</span><span class="badge">Home</span></a>
    <a href="bank_recon.html"><span>Bank Reconciliation</span><span class="badge">Auto</span></a>


    <a href="sales_order_upload.html"><span>Costing Sheet Upload</span><span class="badge">SO</span></a>
    <a href="create_invoice.html"><span>Create Invoice</span><span class="badge">INV</span></a>

    <a href="receive_payment.html"><span>Receive Payment</span><span class="badge">AR</span></a>

    <a href="unapplied_receipts.html"><span>Unapplied Receipts</span><span class="badge">Prepay</span></a>
    <a href="overpayment_refund.html"><span>Overpayment Refund</span><span class="badge">RFND</span></a>
    <a href="payment_allocation_history.html"><span>Allocation History</span><span class="badge">Audit</span></a>
    <a href="pay_bills.html"><span>Pay Bills</span><span class="badge">AP</span></a>
    <a href="credit_note.html"><span>Credit Notes</span><span class="badge">CN</span></a>

    <a href="supplier_doc_upload.html"><span>Supplier Document Upload</span><span class="badge">BILL</span></a>
    <a href="create_bill.html"><span>Create Supplier Bill</span><span class="badge">AP</span></a>
    <a href="debit_note.html"><span>Debit Notes</span><span class="badge">DN</span></a>

    <a href="customers.html"><span>Customers</span><span class="badge">Master</span></a>
    <a href="customer_ledger.html"><span>Customer Ledger</span><span class="badge">AR</span></a>

    <a href="suppliers.html"><span>Suppliers</span><span class="badge">Master</span></a>
    <a href="supplier_ledger.html"><span>Supplier Ledger</span><span class="badge">AP</span></a>

    <a href="soa.html"><span>Statements (SOA)</span><span class="badge">Email</span></a>

    <div class="section">Compliance</div>
    <a href="gst.html"><span>GST Form 5 & Reconciliation</span><span class="badge">IRAS</span></a>
    <a href="payroll.html"><span>Payroll</span><span class="badge">Monthly</span></a>
    <a href="payslips.html"><span>Payslips</span><span class="badge">PDF</span></a>
    <a href="ir8a.html"><span>IR8A (Auto)</span><span class="badge">YA</span></a>
    <a href="corp_tax.html"><span>Corporate Tax</span><span class="badge">IRAS</span></a>
    <a href="acra_reports.html"><span>ACRA Financial Statements</span><span class="badge">ACRA</span></a>

    <div class="section">Audit</div>
    <a href="auditor_pack.html"><span>Auditor Pack</span><span class="badge">FY</span></a>
    <a href="reports_opening_balance_tieout.html"><span>Opening Balance Tie-Out</span><span class="badge">OB</span></a>
    <a href="approval_queue.html"><span>Approval Queue</span><span class="badge">QA</span></a>
    <a href="approval_audit_trail.html"><span>Approval Audit Trail</span><span class="badge">Rpt</span></a>
    <a href="audit_trail.html"><span>Audit Trail</span><span class="badge">Log</span></a>

    <div class="section">Documents</div>
    <a href="supplier_inbox.html"><span>Supplier Invoice Inbox</span><span class="badge">Upload</span></a>

    <div class="section">Cashflow</div>



<div class="section">CFO Analytics</div>
    <a href="cfo_financial_overview.html"><span>Financial Overview</span><span class="badge">FO</span></a>
    <a href="cfo_budget_overview.html"><span>Budget Overview</span><span class="badge">BO</span></a>
    <a href="cfo_income_statement.html"><span>Income Statement</span><span class="badge">IS</span></a>
    <a href="cfo_balance_sheet.html"><span>Balance Sheet</span><span class="badge">BS</span></a>
    <a href="cfo_cashflow_intelligence.html"><span>Cashflow Intelligence</span><span class="badge">CF</span></a>
    <a href="cfo_profitability.html"><span>Profitability</span><span class="badge">GM</span></a>
    <a href="cfo_expense.html"><span>Expense Analytics</span><span class="badge">Exp</span></a>
    <a href="cfo_ar_risk.html"><span>AR Risk</span><span class="badge">AR</span></a>
    <a href="cfo_ap_exposure.html"><span>AP Exposure</span><span class="badge">AP</span></a>
    <a href="cfo_ratios.html"><span>Ratios</span><span class="badge">Fx</span></a>
    <a href="cfo_budget_vs_actual.html"><span>Budget vs Actual (Detail)</span><span class="badge">BvA</span></a>

<div class="section">Reports</div>
    <a href="general_ledger.html"><span>General Ledger</span><span class="badge">GL</span></a>
    <a href="opening_balance_journal.html"><span>Opening Balance Journal</span><span class="badge">OB</span></a>
    <a href="period_lock.html"><span>Period Lock</span><span class="badge">Lock</span></a>
    <a href="reports_cashflow_statement.html"><span>Cashflow Statement</span><span class="badge">ACRA</span></a>
    <a href="reports_statement_changes_equity.html"><span>Changes in Equity</span><span class="badge">ACRA</span></a>
    <a href="reports.html"><span>Reports Dashboard</span><span class="badge">All</span></a>
    <a href="reports_trial_balance.html"><span>Trial Balance</span><span class="badge">TB</span></a>
    <a href="reports_pl.html"><span>Profit &amp; Loss</span><span class="badge">P&amp;L</span></a>
    <a href="reports_bs.html"><span>Balance Sheet</span><span class="badge">BS</span></a>
    <a href="reports_gst_summary.html"><span>GST Summary</span><span class="badge">GST</span></a>
    <a href="reports_gst_recon.html"><span>GST Reconciliation</span><span class="badge">Diff</span></a>
    <a href="reports_ar_ageing.html"><span>AR Ageing</span><span class="badge">AR</span></a>
    <a href="reports_ap_ageing.html"><span>AP Ageing</span><span class="badge">AP</span></a>
    <a href="reports_bank_recon_summary.html"><span>Bank Recon Summary</span><span class="badge">Bank</span></a>
    <a href="reports_payroll_summary.html"><span>Payroll Summary</span><span class="badge">Pay</span></a>

    <div class="section">Migration</div>
    <a href="migration.html"><span>Data Migration</span><span class="badge">Imp</span></a>
    <a href="import_coa.html"><span>Import COA</span><span class="badge">COA</span></a>
    <a href="coa_mapping.html"><span>COA Mapping</span><span class="badge">Map</span></a>
    <a href="import_customers.html"><span>Import Customers</span><span class="badge">CUST</span></a>
    <a href="import_suppliers.html"><span>Import Suppliers</span><span class="badge">SUP</span></a>
    <a href="opening_balances.html"><span>Opening Balances</span><span class="badge">OB</span></a>
    <a href="import_transactions.html"><span>Import Transactions</span><span class="badge">GL</span></a>
    <a href="import_history.html"><span>Import History</span><span class="badge">Log</span></a>
    <a href="migration_validation.html"><span>Validation Report</span><span class="badge">Chk</span></a>

    <div class="section">Settings</div>
    <a href="posting_controls.html"><span>Posting Controls</span><span class="badge">Auto</span></a>
    <a href="settings.html"><span>Company Settings</span><span class="badge">Admin</span></a>
  </div>
</div>

  <main class="main">
      <div class="topbar">
        <div class="page-title">
          <h2>Import Transactions</h2>
          <p>Import historical GL transactions from previous software.</p>
        </div>
        
<div class="grid">
  <section class="card" style="grid-column:span 12;">
    <div class="hd"><h3>Import Transactions (GL)</h3><span class="pill warn">CSV/Excel</span></div>
    <div class="bd">
      <div class="dropzone">
        <div class="small-note"><b>Template columns:</b> txn_date, doc_type, doc_no, description, account_code, debit, credit, customer, supplier, gst_code, gst_amount, currency</div>
        <div style="margin-top:10px;"><input type="file"/></div>
        <div class="actions" style="justify-content:flex-start; margin-top:12px; gap:10px; flex-wrap:wrap;">
          <button class="btn primary" onclick="APP.toast('Placeholder: validate & import transactions')">Validate &amp; Import</button>
          <button class="btn" onclick="APP.toast('Placeholder: download transaction template')">Download Template</button>
          <button class="btn" onclick="APP.toast('Placeholder: simulate posting to ledger')">Simulate Posting</button>
          <button class="btn" onclick="window.location.href='migration.html'">Back</button>
        </div>
      </div>

      <div class="hr"></div>

      
      <div id="txn_map_banner" class="notice warn">
        <div class="title">Validate COA mapping before import</div>
        <div class="muted">This preview shows old codes/descriptions mapped to new Fastrans COA. Import is blocked if any row is unmapped.</div>
      </div>

      <div class="hr"></div>

      <div class="actions" style="justify-content:flex-start; gap:10px; flex-wrap:wrap;">
        <button class="btn" onclick="window.location.href='coa_mapping.html'">Open COA Mapping</button>
        <button class="btn" onclick="window.location.href='unmapped_accounts_report.html'">Unmapped Accounts Report</button>
        <button class="btn primary" onclick="validateTxnMappingV10('txnPreview','btn_import_txn','txn_map_banner', true)">Validate Mapping</button>
        <button id="btn_import_txn" class="btn primary" disabled onclick="APP.toast('Placeholder: import transactions (blocked if unmapped)')">Import Transactions</button>
      </div>

      <div class="hr"></div>

      <h3 style="margin:0 0 8px 0;">Preview (Old → New)</h3>
      <table class="table" id="txnPreview">
        <thead>
          <tr>
            <th>Date</th><th>Doc</th><th>Doc No</th>
            <th>Old Code</th><th>Old Description</th>
            <th>New Code</th><th>New Description</th>
            <th>Status</th>
            <th class="right">Debit</th><th class="right">Credit</th><th>GST</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>2026-01-05</td><td>INV</td><td>FFS-INV-2026-0001</td>
            <td class="code old-code">4-200</td><td class="old-desc">Service Revenue</td>
            <td class="code mapped-code">4000</td><td class="mapped-desc">Service Revenue</td>
            <td><span class="status ok map-status">Mapped</span></td>
            <td class="right money" data-money="1">-</td><td class="right money" data-money="1">1200.00</td><td>SR 108.00</td>
          </tr>
          <tr>
            <td>2026-01-05</td><td>INV</td><td>FFS-INV-2026-0001</td>
            <td class="code old-code">1-050</td><td class="old-desc">Trade Receivables</td>
            <td class="code mapped-code">1100</td><td class="mapped-desc">Trade Receivables (AR Control)</td>
            <td><span class="status ok map-status">Mapped</span></td>
            <td class="right money" data-money="1">1308.00</td><td class="right money" data-money="1">-</td><td>-</td>
          </tr>
          <tr data-mapped="0">
            <td>2026-01-10</td><td>BILL</td><td>UPS-88312</td>
            <td class="code old-code">5-999</td><td class="old-desc">Packaging Expense</td>
            <td class="code mapped-code">—</td><td class="mapped-desc">—</td>
            <td><span class="status bad map-status">Unmapped</span></td>
            <td class="right money" data-money="1">320.00</td><td class="right money" data-money="1">-</td><td>TX 28.80</td>
          </tr>
        </tbody>
      </table>

      <script>
        document.addEventListener('DOMContentLoaded', ()=>{
          // Apply mapping from COA Mapping (saved in localStorage) and block import if unmapped.
          if(window.validateTxnMappingV10){
            validateTxnMappingV10('txnPreview','btn_import_txn','txn_map_banner', true);
          }
        });
      </script>
    <div class="hr"></div>
      <div class="small-note">In production: enforces debits=credits by document, validates COA codes, and stores full audit trail of imported batches.</div>
    </div>
  </section>
</div>


      <div class="hr"></div>
      <div class="footer-note">Static UI demo • All actions are placeholders (no backend). Ready for Django integration.</div>
    </main>
  </div>
</body>
</html>
